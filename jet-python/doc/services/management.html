<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="style.css" rel="stylesheet" type="text/css"/>
<title>Thrift module: management</title></head><body>
<div class="container-fluid">
<h1>Thrift module: management</h1>
<table class="table-bordered table-striped table-condensed"><thead><th>Module</th><th>Services</th><th>Data types</th><th>Constants</th></thead>
<tr>
<td>management</td><td><a href="#Svc_ManagementService">ManagementService</a><br/>
<ul>
<li><a href="#Fn_ManagementService_ConfigureEphemeralSession">ConfigureEphemeralSession</a></li>
<li><a href="#Fn_ManagementService_ExecuteCfgCommand">ExecuteCfgCommand</a></li>
<li><a href="#Fn_ManagementService_ExecuteOpCommand">ExecuteOpCommand</a></li>
<li><a href="#Fn_ManagementService_LoginCheck">LoginCheck</a></li>
</ul>
</td>
<td><a href="#Struct_ConfigCommit">ConfigCommit</a><br/>
<a href="#Enum_ConfigCommitType">ConfigCommitType</a><br/>
<a href="#Enum_ConfigDatabaseType">ConfigDatabaseType</a><br/>
<a href="#Enum_ConfigFormatType">ConfigFormatType</a><br/>
<a href="#Struct_ConfigLoadCommit">ConfigLoadCommit</a><br/>
<a href="#Enum_ConfigLoadType">ConfigLoadType</a><br/>
<a href="#Struct_EphemeralConfig">EphemeralConfig</a><br/>
<a href="#Struct_OperationCommand">OperationCommand</a><br/>
<a href="#Enum_OperationFormatType">OperationFormatType</a><br/>
<a href="#Struct_OperationResponse">OperationResponse</a><br/>
</td>
<td><code><a href="#Const_SERVICE_NAME">SERVICE_NAME</a></code><br/>
<code><a href="#Const_SERVICE_VERSION">SERVICE_VERSION</a></code><br/>
</code></td>
</tr></table>
<hr/><h2 id="Constants">Constants</h2>
<table class="table-bordered table-striped table-condensed"><thead><th>Constant</th><th>Type</th><th>Value</th></thead>
<tr id="Const_SERVICE_NAME"><td><code>SERVICE_NAME</code></td><td><code>string</code></td><td><code>"ManagementService"</code></td></tr><tr><td colspan="3"><blockquote>Management Service name to be used by the clients
<br/></blockquote></td></tr><tr id="Const_SERVICE_VERSION"><td><code>SERVICE_VERSION</code></td><td><code>string</code></td><td><code>"1.0.0"</code></td></tr><tr><td colspan="3"><blockquote>Management Service version
<br/></blockquote></td></tr></table><hr/><h2 id="Enumerations">Enumerations</h2>
<div class="definition"><h3 id="Enum_ConfigFormatType">Enumeration: ConfigFormatType</h3>
Config Format Type
<br/><br/><table class="table-bordered table-striped table-condensed">
<tr><td><code>CONFIG_FORMAT_TEXT</code></td><td><code>1</code></td><td>
Format type TEXT
<br/></td></tr>
<tr><td><code>CONFIG_FORMAT_SET</code></td><td><code>2</code></td><td>
Format type SET
<br/></td></tr>
<tr><td><code>CONFIG_FORMAT_XML</code></td><td><code>3</code></td><td>
Format type XML
<br/></td></tr>
</table></div>
<div class="definition"><h3 id="Enum_ConfigLoadType">Enumeration: ConfigLoadType</h3>
Config load type
<br/><br/><table class="table-bordered table-striped table-condensed">
<tr><td><code>CONFIG_LOAD_REPLACE</code></td><td><code>0</code></td><td>
Load replace, default
<br/></td></tr>
<tr><td><code>CONFIG_LOAD_MERGE</code></td><td><code>1</code></td><td>
Load merge
<br/></td></tr>
<tr><td><code>CONFIG_LOAD_OVERRIDE</code></td><td><code>2</code></td><td>
Load override
<br/></td></tr>
<tr><td><code>CONFIG_LOAD_UPDATE</code></td><td><code>3</code></td><td>
Load update
<br/></td></tr>
</table></div>
<div class="definition"><h3 id="Enum_ConfigCommitType">Enumeration: ConfigCommitType</h3>
Config commit type
<br/><br/><table class="table-bordered table-striped table-condensed">
<tr><td><code>CONFIG_COMMIT_SYNCHRONIZE</code></td><td><code>0</code></td><td>
Commit synchronize, default
<br/></td></tr>
<tr><td><code>CONFIG_COMMIT</code></td><td><code>1</code></td><td>
Commit
<br/></td></tr>
<tr><td><code>CONFIG_COMMIT_AT</code></td><td><code>2</code></td><td>
Commit at an interval
<br/></td></tr>
<tr><td><code>CONFIG_COMMIT_CONFIRMED</code></td><td><code>3</code></td><td>
Commit confirmed
<br/></td></tr>
</table></div>
<div class="definition"><h3 id="Enum_ConfigDatabaseType">Enumeration: ConfigDatabaseType</h3>
Database Type
<br/><br/><table class="table-bordered table-striped table-condensed">
<tr><td><code>CONFIG_DB_SHARED</code></td><td><code>0</code></td><td>
Config DB type is shared, default
<br/></td></tr>
<tr><td><code>CONFIG_DB_BATCH</code></td><td><code>2</code></td><td>
Config DB type is batch
<br/></td></tr>
<tr><td><code>CONFIG_DB_EPHEMERAL</code></td><td><code>3</code></td><td>
Config DB type is ephemeral
<br/></td></tr>
</table></div>
<div class="definition"><h3 id="Enum_OperationFormatType">Enumeration: OperationFormatType</h3>
Output format
<br/><br/><table class="table-bordered table-striped table-condensed">
<tr><td><code>OPERATION_FORMAT_JSON</code></td><td><code>0</code></td><td>
JSON format, default
<br/></td></tr>
<tr><td><code>OPERATION_FORMAT_XML</code></td><td><code>1</code></td><td>
XML format
<br/></td></tr>
<tr><td><code>OPERATION_FORMAT_CLI</code></td><td><code>2</code></td><td>
Text CLI format
<br/></td></tr>
</table></div>
<hr/><h2 id="Structs">Data structures</h2>
<div class="definition"><h3 id="Struct_ConfigCommit">Struct: ConfigCommit</h3>
<table class="table-bordered table-striped table-condensed"><thead><th>Key</th><th>Field</th><th>Type</th><th>Description</th><th>Requiredness</th><th>Default value</th></thead>
<tr><td>1</td><td>commit_type</td><td><code><a href="management.html#Enum_ConfigCommitType">ConfigCommitType</a></code></td><td>Commit type, default is ConfigCommitType.CONFIG_COMMIT_SYNCHRONIZE<br/></td><td>optional</td><td>UNKNOWN</td></tr>
<tr><td>2</td><td>comment</td><td><code>string</code></td><td>commit comment<br/></td><td>optional</td><td>""</td></tr>
<tr><td>3</td><td>attribute</td><td><code>string</code></td><td>If commit_type is just CONFIG_COMMIT then attribute will have<br/>date/time at which commit to be carried out whose values can<br/>be reboot or time with format of type "hh:mm[:ss]" or "yyyy-mm-dd hh:mm[:ss]".<br/>If commit_type is CONFIG_COMMIT_AT then attribute will provide delay interval<br/>for committing the configuration.<br/></td><td>optional</td><td>""</td></tr>
</table><br/>Configuration Commit options to be filled.
<br/></div><div class="definition"><h3 id="Struct_ConfigLoadCommit">Struct: ConfigLoadCommit</h3>
<table class="table-bordered table-striped table-condensed"><thead><th>Key</th><th>Field</th><th>Type</th><th>Description</th><th>Requiredness</th><th>Default value</th></thead>
<tr><td>1</td><td>config</td><td><code>string</code></td><td>Config string of type set, xml, text<br/></td><td>required</td><td></td></tr>
<tr><td>2</td><td>format</td><td><code><a href="management.html#Enum_ConfigFormatType">ConfigFormatType</a></code></td><td>Config string type set, xml or text<br/></td><td>optional</td><td>UNKNOWN</td></tr>
<tr><td>3</td><td>database</td><td><code><a href="management.html#Enum_ConfigDatabaseType">ConfigDatabaseType</a></code></td><td>Database type, default is ConfigDatabaseType.CONFIG_DB_SHARED<br/></td><td>optional</td><td>UNKNOWN</td></tr>
<tr><td>4</td><td>load_type</td><td><code><a href="management.html#Enum_ConfigLoadType">ConfigLoadType</a></code></td><td>Configuration load type, default is ConfigLoadType.CONFIG_LOAD_MERGE<br/></td><td>optional</td><td>UNKNOWN</td></tr>
<tr><td>5</td><td>commit</td><td><code><a href="management.html#Struct_ConfigCommit">ConfigCommit</a></code></td><td>Commit type, default is ConfigCommitType.CONFIG_COMMIT_SYNCHRONIZE<br/></td><td>optional</td><td></td></tr>
</table><br/>Configuration load commit main structure
<br/></div><div class="definition"><h3 id="Struct_OperationCommand">Struct: OperationCommand</h3>
<table class="table-bordered table-striped table-condensed"><thead><th>Key</th><th>Field</th><th>Type</th><th>Description</th><th>Requiredness</th><th>Default value</th></thead>
<tr><td>1</td><td>command</td><td><code>string</code></td><td>Command input<br/></td><td>required</td><td></td></tr>
<tr><td>2</td><td>in_format</td><td><code><a href="management.html#Enum_OperationFormatType">OperationFormatType</a></code></td><td>Input format, default is JSON<br/></td><td>optional</td><td>UNKNOWN</td></tr>
<tr><td>3</td><td>out_format</td><td><code><a href="management.html#Enum_OperationFormatType">OperationFormatType</a></code></td><td>Output format, default is JSON<br/></td><td>optional</td><td>UNKNOWN</td></tr>
</table><br/>Operational command structure
<br/></div><div class="definition"><h3 id="Struct_OperationResponse">Struct: OperationResponse</h3>
<table class="table-bordered table-striped table-condensed"><thead><th>Key</th><th>Field</th><th>Type</th><th>Description</th><th>Requiredness</th><th>Default value</th></thead>
<tr><td>1</td><td>status</td><td><code><a href="shared.html#Struct_RetStatus">shared.RetStatus</a></code></td><td>Error status<br/></td><td>default</td><td></td></tr>
<tr><td>2</td><td>response</td><td><code>string</code></td><td>Interfaces<br/></td><td>default</td><td></td></tr>
</table><br/>Operational response structure
<br/></div><div class="definition"><h3 id="Struct_EphemeralConfig">Struct: EphemeralConfig</h3>
<table class="table-bordered table-striped table-condensed"><thead><th>Key</th><th>Field</th><th>Type</th><th>Description</th><th>Requiredness</th><th>Default value</th></thead>
<tr><td>1</td><td>eph_name</td><td><code>string</code></td><td>Ephemeral instance name<br/></td><td>required</td><td></td></tr>
<tr><td>2</td><td>delete_on_disconnect</td><td><code>bool</code></td><td>Option to delete ephemeral configuration on disconnect<br/></td><td>optional</td><td>0</td></tr>
</table><br/>Epheral options for client session
<br/></div><hr/><h2 id="Services">Services</h2>
<h3 id="Svc_ManagementService">Service: ManagementService</h3>
Management APIs supported in JET
<br/><div class="definition"><h4 id="Fn_ManagementService_LoginCheck">Function: ManagementService.LoginCheck</h4>
<pre><code>bool</code> LoginCheck(<code>string</code> user,
                <code>string</code> passwd)
</pre>Authenticate the user using this LoginCheck API.
Returns boolean value indicating login successful or failed
<br/><br/><h4 id="Parameters_ManagementService_LoginCheck">Parameters</h4>
<table class="table-bordered table-striped table-condensed"><thead><th>Name</th><th>Description</th></thead><tr><td>user</td><td>String representation of the username<br/></td></tr>
<tr><td>passwd</td><td>String representation of the user's password<br/></td></tr>
</table></div><div class="definition"><h4 id="Fn_ManagementService_ConfigureEphemeralSession">Function: ManagementService.ConfigureEphemeralSession</h4>
<pre><code><a href="shared.html#Struct_RetStatus">shared.RetStatus</a></code> ConfigureEphemeralSession(<code><a href="management.html#Struct_EphemeralConfig">EphemeralConfig</a></code> eph_config)
</pre>API to set ephemeral option, 0 on success and error code on failure.
<br/><br/><h4 id="Parameters_ManagementService_ConfigureEphemeralSession">Parameters</h4>
<table class="table-bordered table-striped table-condensed"><thead><th>Name</th><th>Description</th></thead><tr><td>eph_config</td><td>Ephemeral configuration<br/></td></tr>
</table></div><div class="definition"><h4 id="Fn_ManagementService_ExecuteOpCommand">Function: ManagementService.ExecuteOpCommand</h4>
<pre><code><a href="management.html#Struct_OperationResponse">OperationResponse</a></code> ExecuteOpCommand(<code><a href="management.html#Struct_OperationCommand">OperationCommand</a></code> op_command)
</pre>    The argument op_command is a structure which can take JSON, CLI, XML as command inputs with filling
    appropriate fields in the structure. Examples can be referred from below.
    
    <pre>
     Example:
    op_command = OperationCommand("show interfaces em0", OperationFormatType.OPERATION_FORMAT_CLI,
                                                        OperationFormatType.OPERATION_FORMAT_CLI);
    result = mgmt_handle.ExecuteOpCommand(op_command)
    print 'Invoked ExecuteOpRpc \nreturn = ', result
    
    json_query = "{ \"get-interface-information\" : { \"interface-name\" : \"em0\" } }"
    op_command = OperationCommand(json_query,
                                                        OperationFormatType.OPERATION_FORMAT_JSON,
                                                        OperationFormatType.OPERATION_FORMAT_JSON);
    result = mgmt_handle.ExecuteOpCommand(op_command)
    print 'Invoked ExecuteOpRpc \nreturn = ', result
    
    xml_query = "&ltget-interface-information &gt &ltinterface-name&gtem0&lt/interface-name&gt &ltdetail/&gt &lt/get-interface-information&gt"
    op_command = OperationCommand(xml_query, in_format=OperationFormatType.OPERATION_FORMAT_XML,
                                                        out_format=OperationFormatType.OPERATION_FORMAT_XML);
    result = mgmt_handle.ExecuteOpCommand(op_command)
    print 'Invoked ExecuteOpRpc \nreturn = ', result
 
<br>
</pre>
     returns OperationResponse.status.err_code with 0 on success else nonzero value, response string will
     have appropriate output formatted string. <br><br>
<p/>
     Note: The CLI command with pipe '|' option is not supported, hence the options included with '|' will be ignored
           in the processing. Example: "show interfaces terse ge-0/0/* | grep inet" is same as "show interfaces terse ge-0/0/*" both will
           return exactly the same information in the response.
<p/>
<br/><br/><h4 id="Parameters_ManagementService_ExecuteOpCommand">Parameters</h4>
<table class="table-bordered table-striped table-condensed"><thead><th>Name</th><th>Description</th></thead><tr><td>op_command</td><td>Command input<br/></td></tr>
</table></div><div class="definition"><h4 id="Fn_ManagementService_ExecuteCfgCommand">Function: ManagementService.ExecuteCfgCommand</h4>
<pre><code><a href="shared.html#Struct_RetStatus">shared.RetStatus</a></code> ExecuteCfgCommand(<code><a href="management.html#Struct_ConfigLoadCommit">ConfigLoadCommit</a></code> config_commit)
</pre> Configurng and committing the configuration on the device.
 The configuration changes are made with exclusive mode if the configuration being made is on static DB.
 The possible configuration formats are text, set, xml and json. The default format will be json in future.
 Currently the formats supported are set, xml, text formats only.
 The database types also can be passed like shared, private, batch, ephemeral. The default database is
 shared and is the only database type supported now.
 
<pre>
Example:
  
 snmp_config = "
   set snmp view readall oid .1 include
   set snmp community test123 view readall
   set snmp community test123 authorization read-write
  "
 commit = ConfigCommit(ConfigCommitType.CONFIG_COMMIT, "Test comment", "")
 config = ConfigLoadCommit(snmp_config,ConfigFormatType.CONFIG_FORMAT_SET, ConfigDatabaseType.CONFIG_DB_SHARED,
         ConfigLoadType.CONFIG_LOAD_REPLACE, commit)
 result = mgmt_handle.ExecuteCfgCommand(config)
 print 'Invoked ExecuteCfgCommit \nreturn = ', result
 
 snmp_config = "
  snmp {
   view readall {
    oid .1 include;
   }
 
   community test123 {
    view readall;
    authorization read-write;
   }
  }
  "
 config = ConfigLoadCommit(snmp_config,ConfigFormatType.CONFIG_FORMAT_TEXT, ConfigDatabaseType.CONFIG_DB_SHARED,
         ConfigLoadType.CONFIG_LOAD_MERGE, commit)
 result = mgmt_handle.ExecuteCfgCommand(config)
 print 'Invoked ExecuteCfgCommit \nreturn = ', result
 
 snmp_config = "
   &ltsnmp&gt
    &ltview&gt
     &ltname&gtreadall&lt/name&gt
     &ltoid&gt
      &ltname&gt.1&lt/name&gt
      &ltinclude/&gt
     &lt/oid&gt
     &ltoid&gt
      &ltname&gt.1.3&lt/name&gt
      &ltexclude/&gt
     &lt/oid&gt
    &lt/view&gt
    &ltcommunity&gt
     &ltname&gttest123&lt/name&gt
     &ltview&gtreadall&lt/view&gt
     &ltauthorization&gtread-write&lt/authorization&gt
    &lt/community&gt
   &lt/snmp&gt
  "
 config = ConfigLoadCommit(snmp_config,ConfigFormatType.CONFIG_FORMAT_XML, ConfigDatabaseType.CONFIG_DB_SHARED,
         ConfigLoadType.CONFIG_LOAD_REPLACE, commit)
 result = mgmt_handle.ExecuteCfgCommand(config)
 print 'Invoked ExecuteCfgCommit \nreturn = ', result
<p/>
</pre>
 
 returns RetStatus.err_code with 0 on success else nonzero value<br>
<br/><br/><h4 id="Parameters_ManagementService_ExecuteCfgCommand">Parameters</h4>
<table class="table-bordered table-striped table-condensed"><thead><th>Name</th><th>Description</th></thead><tr><td>config_commit</td><td>ConfigLoadCommit of type set, xml, text<br/></td></tr>
</table></div></div></body></html>
